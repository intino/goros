package io.intino.goros.modernizing.monet.renderers.templates.konos;

import io.intino.itrules.template.Rule;
import io.intino.itrules.template.Template;

import java.util.ArrayList;
import java.util.List;

import static io.intino.itrules.template.condition.predicates.Predicates.*;
import static io.intino.itrules.template.outputs.Outputs.*;

public class ProcessDefinitionTemplate extends Template {

	public List<Rule> ruleSet() {
		List<Rule> rules = new ArrayList<>();
		rules.add(rule().condition(allTypes("process")).output(literal("dsl Konos\n\nuse UI\nuse Theme\n")).output(expression().output(placeholder("view", "use").multiple("\n"))).output(literal("\n")).output(expression().output(placeholder("display", "use").multiple("\n"))).output(literal("\n\nTemplate(layout=Vertical Flexible, format=smallAir) ")).output(placeholder("name", "firstUpperCase")).output(literal("Template\n    Block(layout=Horizontal, format=headerSpaced) header\n        Block(layout=Vertical Flexible)\n            Block(layout=Horizontal)\n                Link(title=\"Tareas\", format=h4 middleAirRight, visible=false) tasks as Action Addressable(")).output(placeholder("module", "firstUpperCase")).output(literal("Elements.taskBoard)\n                Link(title=\"Mis tareas\", format=h4 middleAirRight, visible=false) myTasks as Action Addressable(")).output(placeholder("module", "firstUpperCase")).output(literal("Elements.taskTray)\n                Text(value=\"/\", format=h4 middleAirRight)\n                Text(format=h4 bold) label\n            Text(format=body2 grey) description\n\n    Block(layout=Horizontal Flexible, format=smallAirTop) > TemplateStamp(template=")).output(placeholder("name", "firstUpperCase")).output(literal("EmbeddedTemplate) content\n\nTemplate(layout=Vertical Flexible) ")).output(placeholder("name", "firstUpperCase")).output(literal("EmbeddedTemplate as Relative(height=100%)\n    Block(layout=Horizontal, format=bottomBordered)\n        Block(layout=Horizontal Center StartJustified, format=middleAirLeft airRight)\n            MaterialIconButton(title=\"Mostrar listado\", icon=\"ArrowBack\", size=Small, format=middleAirRight, visible=false) showCollectionBack\n            MaterialIconButton(title=\"Mostrar listado\", icon=\"Menu\", size=Small, format=middleAirRight, visible=false) showCollectionMenu\n            Block(format=middleAirLeft)\n                Text(format=bold, visible=false) label\n                Text(format=body2 grey, visible=false) description\n        Block(layout=Horizontal Flexible, format=middleAirBottom middleAirTop)\n            Block(layout=Horizontal Flexible) > InheritTemplateStamp(template=\"TaskToolbarTemplate\", owner=")).output(placeholder("module", "firstUpperCase")).output(literal("Elements.goros) toolbar\n            Block(layout=Horizontal EndJustified)\n                MaterialIconButton(title=\"Anterior\", icon=\"KeyboardArrowLeft\", size=Small, format=airRight, visible=false) previous as SelectPreviousItem(collection=empty)\n                MaterialIconButton(title=\"Siguiente\", icon=\"KeyboardArrowRight\", size=Small, format=airRight, visible=false) next as SelectNextItem(collection=empty)\n\n    Block(layout=Horizontal) header\n        Block(layout=Vertical) headerToolbar as Relative(width=100%, offsetWidth=40px)\n            Selector viewSelector as Tabs(scrollButtons=Auto)\n                Text(value=\"Estado\") state as Option\n                ")).output(expression().output(placeholder("view", "declaration").multiple("\n"))).output(literal("\n        Block(layout=Horizontal EndJustified Center)\n            MaterialIconButton(title=\"Abrir\", icon=\"ZoomOutMap\", size=Small, visible=false) openInstance as OpenLayer Addressable(")).output(placeholder("module", "firstUpperCase")).output(literal("Elements.instance)\n\n    Block(layout=Vertical Flexible) content as Relative(height=100%)\n        Block(layout=Vertical Flexible) stateView as Conditional(header.headerToolbar.viewSelector.state) Relative(height=100%) > TemplateStamp(template=")).output(placeholder("name", "firstUpperCase")).output(literal("StateViewTemplate) stateViewStamp\n        ")).output(expression().output(placeholder("view", "page").multiple("\n"))).output(literal("\n\nTemplate(format=spaced) ")).output(placeholder("name", "firstUpperCase")).output(literal("StateViewTemplate as Relative(height=100%)\n    Block as Conditional\n        ")).output(expression().output(placeholder("display").multiple("\n"))).output(literal("\n    InheritTemplateStamp(template=\"TaskStateViewTemplate\", owner=")).output(placeholder("module", "firstUpperCase")).output(literal("Elements.goros) state\n\n")).output(expression().output(placeholder("view").multiple("\n"))));
		rules.add(rule().condition(all(allTypes("display"), trigger("use"))).output(literal("use ")).output(placeholder("name", "firstUpperCase")));
		rules.add(rule().condition(allTypes("display")).output(literal("TemplateStamp(template=")).output(placeholder("name", "firstUpperCase")).output(placeholder("viewName")).output(literal("ViewTemplate)")));
		rules.add(rule().condition(all(allTypes("view"), trigger("use"))).output(literal("   ")).output(expression().output(placeholder("show", "use").multiple("\n"))));
		rules.add(rule().condition(all(allTypes("view"), trigger("declaration"))).output(literal("Text(value=\"")).output(placeholder("label")).output(literal("\") ")).output(placeholder("name", "firstLowerCase")).output(literal(" as Option")));
		rules.add(rule().condition(all(allTypes("view"), trigger("page"))).output(literal("Block(layout=Vertical Flexible) ")).output(placeholder("name", "firstLowerCase")).output(literal("View as Conditional(header.headerToolbar.viewSelector.")).output(placeholder("name", "firstLowerCase")).output(literal(") Relative(height=100%) > TemplateStamp(template=")).output(placeholder("definition", "firstUpperCase")).output(placeholder("name", "firstUpperCase")).output(literal("ViewTemplate) ")).output(placeholder("name", "firstLowerCase")).output(literal("ViewStamp")));
		rules.add(rule().condition(allTypes("view")).output(literal("Template(format=spaced) ")).output(placeholder("definition", "firstUpperCase")).output(placeholder("name", "firstUpperCase")).output(literal("ViewTemplate as Relative(height=100%)\n    ")).output(expression().output(placeholder("show").multiple("\n"))));
		rules.add(rule().condition(all(allTypes("show"), trigger("use"))).output(literal("use ")).output(placeholder("definitionName", "firstUpperCase")));
		rules.add(rule().condition(allTypes("show")).output(literal("Block(layout=Vertical Flexible) ")).output(placeholder("definitionName", "firstLowerCase")).output(placeholder("viewName", "firstUpperCase")).output(literal("Block as Conditional Relative(height=100%) > TemplateStamp(template=")).output(placeholder("definitionName", "firstUpperCase")).output(placeholder("viewName", "firstUpperCase")).output(literal(") ")).output(placeholder("definitionName", "firstLowerCase")).output(placeholder("viewName", "firstUpperCase")).output(literal("Stamp")));
		return rules;
	}

	public String render(Object object) {
		return new io.intino.itrules.Engine(this).render(object);
	}

	public String render(Object object, java.util.Map<String, io.intino.itrules.Formatter> formatters) {
		return new io.intino.itrules.Engine(this).addAll(formatters).render(object);
	}
}